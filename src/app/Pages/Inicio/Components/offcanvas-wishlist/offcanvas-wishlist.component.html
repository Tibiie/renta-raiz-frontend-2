<div
  class="fixed z-50 bg-white shadow-2xl border-gray-200 transform transition-transform duration-300
         flex flex-col  /* MOBILE: Pantalla completa desde la izquierda */
         top-0 left-0 h-full w-full sm:w-96 rounded-r-2xl border-r
         
         /* DESKTOP: Popup abajo derecha */
         lg:top-auto lg:left-auto lg:bottom-0 lg:right-24 lg:h-auto lg:w-96 lg:rounded-r-none lg:rounded-t-2xl lg:border"

  [ngClass]="{
    'translate-x-0': visible, 
    '-translate-x-full lg:translate-x-0 lg:translate-y-full': !visible
  }">

  <div class="flex-none flex justify-between items-center p-4 border-b cursor-pointer" 
       (click)="toggleMinimizado(); $event.stopPropagation()">
    <h2 class="text-lg items-center font-semibold text-gray-800">
      Recorrido ğŸ”
    </h2>
    <button class="lg:hidden text-gray-500 font-bold text-xl" (click)="visible = false; $event.stopPropagation()">
      &times;
    </button>
  </div>

  <div class="flex flex-col flex-1 min-h-0 transition-all duration-300"
       [ngClass]="{
         'lg:max-h-0 overflow-hidden': minimizado, 
         'lg:max-h-[600px]': !minimizado
       }">

      <div class="flex-1 overflow-y-auto p-4">
        
        <div class="flex items-center justify-between gap-3 mb-4">
          <h5 class="text-xs font-semibold text-gray-500 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-[#CDAD60]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 110 20 10 10 0 010-20z" />
            </svg>
            Disponibilidad sujeta a cambios.
          </h5>
        </div>

        <ng-container *ngIf="favoritos.length > 0; else vacio">
          <div *ngFor="let fav of favoritos" class="flex items-center mb-3 border rounded-lg p-2 shadow-sm relative bg-white">
            <img [src]="fav.image1" [alt]="fav.nombre" class="w-16 h-16 object-cover rounded-lg mr-3" />
            <div class="flex-1 pr-6"> <p class="font-bold text-gray-800 text-sm leading-tight mb-1">{{ fav.address }}</p>
              <p class="text-gray-500 text-xs">{{ fav.city }}</p>
            </div>
            <button (click)="eliminar(fav.codpro)" class="absolute top-2 right-2 text-red-400 hover:text-red-600 p-1">
              &times;
            </button>
          </div>
        </ng-container>

        <ng-template #vacio>
           <p class="text-gray-400 text-center mt-10">No hay propiedades seleccionadas.</p>
        </ng-template>
      </div>

      <div class="flex-none p-4 bg-gray-50 border-t mt-auto">
        <div class="flex items-center gap-3">
          <button type="button" (click)="abrirModalRecorrido()"
            class="flex-1 flex items-center justify-center text-white font-bold rounded-lg text-sm py-3 transition-colors bg-[#080E36] hover:bg-[#cdad60]">
             Agendar Visita
          </button>

          <button type="button" (click)="limpiar()"
            class="flex-1 flex items-center justify-center text-gray-700 font-bold rounded-lg text-sm py-3 border border-gray-300 hover:bg-gray-100 bg-white">
             Limpiar
          </button>
        </div>
      </div>

  </div>
</div>